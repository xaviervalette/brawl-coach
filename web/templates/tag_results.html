{% extends 'base.html'%}

{% block body %}

<div class="bg-dark text-secondary pt-5 px-4 mt-5 text-center border-bottom">
  <h1 class="display-4 fw-bold text-white">{{tag}}</h1>
  </div>
</div>

<div class="px-4 my-5 text-center">
  <h1 class="display-4 fw-bold">Battlelog stats</h1>
  <div class="col-lg-6 mx-auto">
    <table class="table">
      <thead class="table-dark text-center">
        <th class="text-center">Key</th>
        <th class="text-center">Value</th>
      </thead>
      <tbody>
        <tr class="align-middle table-success">
              <td scope="row">Win</td>
              <td scope="row">{{winNumber}}</td>
          </tr>
          <tr class="align-middle table-warning">
            <td scope="row">Draw</td>
            <td scope="row">{{drawNumber}}</td>
        </tr>
        <tr class="align-middle table-danger">
          <td scope="row">Loose</td>
          <td scope="row">{{looseNumber}}</td>
      </tr>

      <tr class="align-middle">
        <td scope="row">Win Rate</td>
        <td scope="row">{{"%.0f"|format(100*winNumber/(winNumber+looseNumber))}}%</td>
    </tr>
    <tr class="align-middle">
      <td scope="row">Star Rate</td>
      <td scope="row">{{"%.0f"|format(100*starNumber/(winNumber+drawNumber))}}%</td>
  </tr>
      </tbody>
    </table>
  </div>
</div>

  <div class="px-4 my-5 text-center border-bottom">
    <h1 class="display-4 fw-bold">Battlelogs</h1>
    <div class="col-lg-6 mx-auto">
      <table class="table" data-sorting="true" data-paging="true" data-paging-size="7">
        <thead class="table-dark text-center">
          <tr>
            <th class="text-center" data-breakpoints="xs">Result</th>
            <th class="text-center">Mode</th>
            <th class="text-center">Map</th>
            <th class="text-center">Star Player</th>
            <th class="text-center" data-breakpoints="xs">Brawler</th>
          </tr>
        </thead>
        <tbody>
          {% for i in range(0, len) %}
          {% if result[i] == "victory" %}
          <tr class="align-middle table-success">
          {% elif result[i] == "defeat" %}
          <tr class="align-middle table-danger">
          {% elif result[i] == "draw" %}
          <tr class="align-middle table-warning">
          {% endif %}          {% if result[i] == "victory" %}
            <td scope="row"><span class="badge bg-success">VICTORY</span></td>
            {% elif result[i] == "defeat" %}
            <td scope="row"><span class="badge bg-danger">DEFEAT</span></td>
            {% elif result[i] == "draw" %}
            <td scope="row"><span class="badge bg-warning text-dark">DRAW</span></td>
            {% else %}
            <td scope="row"><span class="badge bg-danger">DEFEAT</span></td>
            {% endif %}
            <td>{{battlelogs['items'][i]["event"]["map"]|upper}}</td>
            <td>{{battlelogs['items'][i]["battle"]["mode"]|upper}}</td>
            {% if battlelogs['items'][i]["battle"]["result"] == "victory" %}                    
            {% if battlelogs['items'][i]["isStarPlayer"] == "yes" %}
            <td scope="row"><span class="badge bg-success">YES</span></td>
            {% else %}
            <td scope="row"><span class="badge bg-danger">NO</span></td>
            {% endif %}
            {% else %}
            <td scope="row"></td>
            {% endif %}
            <td>TARA</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    </div>

    <script>
      jQuery(function($){
	$('.table').footable();
});
      </script>
  {% endblock body %}

<!-- For loop logic of jinja template -->
{% for i in range(0, len) %}
<li>{{battlelogs['items'][i]}}</li>
{% endfor %}
