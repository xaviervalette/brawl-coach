{% extends 'base.html'%}

{% block table_tag_brawler %}

<div class="bg-dark text-secondary px-4 mt-5 text-center border-bottom">
  <h1 class="display-4 fw-bold text-white">{{tag}}</h1>
  </div>
</div>

<div class="px-4 my-5 text-center">
  <h1 class="display-4 fw-bold">Battlelog stats</h1>
  <div class="col-lg-6 mx-auto">
    <table class="table">
      <thead class="table-dark">
        <tr class="align-middle">
          <th scope="col" colspan="2">Results</th>
        </tr>
      </thead>
      <tbody>
        <tr class="align-middle table-success">
              <th scope="row">Win</th>
              <th scope="row">{{winNumber}}</th>
          </tr>
          <tr class="align-middle table-warning">
            <th scope="row">Draw</th>
            <th scope="row">{{drawNumber}}</th>
        </tr>
        <tr class="align-middle table-danger">
          <th scope="row">Loose</th>
          <th scope="row">{{looseNumber}}</th>
      </tr>
      <tr class="align-middle table-dark">
        <th scope="col" colspan="2">Ratios</th>
      </tr>
      <tr class="align-middle">
        <th scope="row">Win Rate</th>
        <th scope="row">{{"%.0f"|format(100*winNumber/(winNumber+looseNumber))}}%</th>
    </tr>
    <tr class="align-middle">
      <th scope="row">Star Rate</th>
      <th scope="row">{{"%.0f"|format(100*starNumber/(winNumber+drawNumber))}}%</th>
  </tr>
      </tbody>
    </table>
  </div>
</div>

  <div class="px-4 my-5 text-center border-bottom">
    <h1 class="display-4 fw-bold">Battlelogs</h1>
    <div class="col-lg-6 mx-auto">
      <table id="table_id" class="table">
        <thead class="table-dark">
          <tr>
            <th scope="col">Mode</th>
            <th scope="col">Map</th>
            <th scope="col">Star Player</th>
          </tr>
        </thead>
        <tbody>
            {% for i in range(0, len) %}
            <!--<li>{{battlelogs['items'][i]}}</li>-->
                {% if result[i] == "victory" %}
                <tr class="align-middle table-success">
                {% elif result[i] == "defeat" %}
                <tr class="align-middle table-danger">
                {% elif result[i] == "draw" %}
                <tr class="align-middle table-warning">
                {% endif %}
                    <td>{{battlelogs['items'][i]["battle"]["mode"]|upper}}</td>
                    <td>{{battlelogs['items'][i]["event"]["map"]|upper}}</td>
                    {% if battlelogs['items'][i]["battle"]["result"] == "victory" %}                    
                    {% if battlelogs['items'][i]["isStarPlayer"] == "yes" %}
                    <th scope="row"><span class="badge bg-success">YES</span></th>
                    {% else %}
                    <th scope="row"><span class="badge bg-danger">NO</span></th>
                    {% endif %}
                    {% else %}
                    <th scope="row"></th>
                    {% endif %}
            </tr>
            {% endfor %}
        </tbody>
      </table>
    </div>
    </div>

    <script>
      $(document).ready(function () {
      $('#dtBasicExample').DataTable({
      "ordering": true // false to disable sorting (or any other option)
      });
      $('.dataTables_length').addClass('bs-select');
      });
      
      $(document).ready( function () {
          //$('#table_id').DataTable();
          $('#table_id').dataTable()
      } );
      
      </script>
  {% endblock table_tag_brawler %}

<!-- For loop logic of jinja template -->
{% for i in range(0, len) %}
<li>{{battlelogs['items'][i]}}</li>
{% endfor %}
